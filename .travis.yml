language: node_js
node_js:
- lts/*
before_install:
- openssl aes-256-cbc -K $encrypted_65f725bac799_key -iv $encrypted_65f725bac799_iv
  -in deploy_rsa.enc -out deploy_rsa -d
script:
- cd frontend
- npm install
- npm test
- npm run build
- cd ..
- cd server
- npm install
- npm run migrate
- cd ..
- chmod 0600 deploy_rsa
- rsync -r -e "ssh -o StrictHostKeyChecking=no -i deploy_rsa" --delete-after --quiet
  $TRAVIS_BUILD_DIR prod@13.56.27.60:~
notifications:
  slack:
    secure: Ap9qkWAv01RdFQwA6Jxtp/w8wG7FXzr5a1IDUREwmuasr2jBTcbGTjzJtsyvDVxzVyEA+bMiBZ7XFNd5COS4pBqRShnW2JKV7dC8pM3zPF8LVz1tOIJndhMO2KgCEm+aLOMTkKYauK1beHziPYtDsB0OkeAcavldjpxMCpAGZijkt6F6A3cAPIdBTylI1dkfmhXDkXMonQ6hU9Y0EO3z3nwe08cFFx5RK9tdZzQbHXBKhDppvqJyfxTn7aO1OKI3SBlqBIcmGSYE3K2F7lXPuxcQK+F754VZLSgv5B9tJT49xRlKwGRAbgPXqh0IMJHGn6jDwBylRqK0Mkon8xFWpK8d5UUmUqPk1cXvCt0F3OZ76Eoi2gGiqKvtrqyAXZVKMUL0Uy5h50dBaPDsS8uVUBpU21KKwbpsCzVA+5csC+oqe6rIA0GlXmSAiECIgBVtLWs54fC6sc9K1CPsTbEIfR0rL0pdX48ZGCFv7N8zpDV+IhjWcYzYJSHqasxVqlrTCIHViZ7e2s1B2TG3uAbsgY/o9sjTjfqymmoHrkvM1zVwrP2cEEZNNNiIddMND+nBorf17mSIRN44SKbVrIRc8YPh+EP9l7uBIwXH5bJCcxMhLRzcW6qQW8UBSD43xrAf3x7uHsxwseaeO1Wf5CE8wp118Byy29QO93lRVOdKmlQ=
env:
  matrix:
    secure: d0CeMp8NGTFixQVDonNwlj6KyRAdngaDy8zkRj7bHTULseKo0qztauUB2nUGWaiJMIsCNLgI7U8j7U8GwIpjQZAXGKfTsPlelN6fJ7gA7be9Y8K9qk5Snzha44FI4qmCnmU9IotwjA6WA5/FTQnlYhxh+4RoQzWylHleHJ4F6KVMjU+HI2oprxwSJXqcluQu3vhVjnCpLBHV6m/n7rpVVBup9DjUQBqjGY7fjCDeCV8VWp0TScW10sYq+vX8bojPnUtFf28xG50JccodNc8734tP5Yd67zYqOeEfRfcESrBHpxJx3jHswoeUAoP6JA/KMq+Tw1hw2bGZAgYHM1zy+vdrfpDzUtKT4rOA1d/jTMjsK8Cjpr3KnKY1S5wQ3N0iCqDYRzb5otqsXnoQ008EZw6EbYkskA91WhyhJ/OLP35IMJXahlfGoxCXmepE7s0vFOqyMaCxRbdFA/eXlXwJ7Nv0iuA2VUS0/CnlW67pnnZW5PJogUOPXR3CUm0D/pIyU19Id3J6wX07KzrZj5CZF/Wac1bDYOwR3nCUQMbMheymLB26PwuAiR2H1g+KGdqyLVsTJvznlxEtqA7xqnad1tavrX5jB9hjo8lDPF2ZIyRI68gz9/s15LXiFX/toytTCN6Ea2ZKH09i2oAZ5/BNSmsyri+20h8rXUf7IVlJVHQ=
